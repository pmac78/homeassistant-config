function e(e,t,i,o){var r,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,i=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),r=new WeakMap;let s=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=r.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&r.set(t,e))}return e}toString(){return this.cssText}};const a=(e,...t)=>{const i=1===e.length?e[0]:t.reduce((t,i,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1],e[0]);return new s(i,e,o)},n=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,o))(t)})(e):e,{is:l,defineProperty:c,getOwnPropertyDescriptor:d,getOwnPropertyNames:h,getOwnPropertySymbols:u,getPrototypeOf:g}=Object,p=globalThis,f=p.trustedTypes,_=f?f.emptyScript:"",v=p.reactiveElementPolyfillSupport,m=(e,t)=>e,b={toAttribute(e,t){switch(t){case Boolean:e=e?_:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},y=(e,t)=>!l(e,t),$={attribute:!0,type:String,converter:b,reflect:!1,useDefault:!1,hasChanged:y};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;let w=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=$){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(e,i,t);void 0!==o&&c(this.prototype,e,o)}}static getPropertyDescriptor(e,t,i){const{get:o,set:r}=d(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:o,set(t){const s=o?.call(this);r?.call(this,t),this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??$}static _$Ei(){if(this.hasOwnProperty(m("elementProperties")))return;const e=g(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(m("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(m("properties"))){const e=this.properties,t=[...h(e),...u(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(n(e))}else void 0!==e&&t.push(n(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,o)=>{if(i)e.adoptedStyleSheets=o.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const i of o){const o=document.createElement("style"),r=t.litNonce;void 0!==r&&o.setAttribute("nonce",r),o.textContent=i.cssText,e.appendChild(o)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){const i=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,i);if(void 0!==o&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:b).toAttribute(t,i.type);this._$Em=e,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$Em=null}}_$AK(e,t){const i=this.constructor,o=i._$Eh.get(e);if(void 0!==o&&this._$Em!==o){const e=i.getPropertyOptions(o),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:b;this._$Em=o;const s=r.fromAttribute(t,e.type);this[o]=s??this._$Ej?.get(o)??s,this._$Em=null}}requestUpdate(e,t,i){if(void 0!==e){const o=this.constructor,r=this[e];if(i??=o.getPropertyOptions(e),!((i.hasChanged??y)(r,t)||i.useDefault&&i.reflect&&r===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,i))))return;this.C(e,t,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:o,wrapped:r},s){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==r||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),!0===o&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e){const{wrapped:e}=i,o=this[t];!0!==e||this._$AL.has(t)||void 0===o||this.C(t,void 0,i,o)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}};w.elementStyles=[],w.shadowRootOptions={mode:"open"},w[m("elementProperties")]=new Map,w[m("finalized")]=new Map,v?.({ReactiveElement:w}),(p.reactiveElementVersions??=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const k=globalThis,C=k.trustedTypes,S=C?C.createPolicy("lit-html",{createHTML:e=>e}):void 0,A="$lit$",E=`lit$${Math.random().toFixed(9).slice(2)}$`,z="?"+E,x=`<${z}>`,O=document,T=()=>O.createComment(""),P=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,M="[ \t\n\f\r]",U=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,V=/-->/g,q=/>/g,H=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),F=/'/g,L=/"/g,N=/^(?:script|style|textarea|title)$/i,R=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),B=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),I=new WeakMap,W=O.createTreeWalker(O,129);function K(e,t){if(!j(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==S?S.createHTML(t):t}const G=(e,t)=>{const i=e.length-1,o=[];let r,s=2===t?"<svg>":3===t?"<math>":"",a=U;for(let t=0;t<i;t++){const i=e[t];let n,l,c=-1,d=0;for(;d<i.length&&(a.lastIndex=d,l=a.exec(i),null!==l);)d=a.lastIndex,a===U?"!--"===l[1]?a=V:void 0!==l[1]?a=q:void 0!==l[2]?(N.test(l[2])&&(r=RegExp("</"+l[2],"g")),a=H):void 0!==l[3]&&(a=H):a===H?">"===l[0]?(a=r??U,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,n=l[1],a=void 0===l[3]?H:'"'===l[3]?L:F):a===L||a===F?a=H:a===V||a===q?a=U:(a=H,r=void 0);const h=a===H&&e[t+1].startsWith("/>")?" ":"";s+=a===U?i+x:c>=0?(o.push(n),i.slice(0,c)+A+i.slice(c)+E+h):i+E+(-2===c?t:h)}return[K(e,s+(e[i]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),o]};class X{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let r=0,s=0;const a=e.length-1,n=this.parts,[l,c]=G(e,t);if(this.el=X.createElement(l,i),W.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(o=W.nextNode())&&n.length<a;){if(1===o.nodeType){if(o.hasAttributes())for(const e of o.getAttributeNames())if(e.endsWith(A)){const t=c[s++],i=o.getAttribute(e).split(E),a=/([.?@])?(.*)/.exec(t);n.push({type:1,index:r,name:a[2],strings:i,ctor:"."===a[1]?ee:"?"===a[1]?te:"@"===a[1]?ie:Q}),o.removeAttribute(e)}else e.startsWith(E)&&(n.push({type:6,index:r}),o.removeAttribute(e));if(N.test(o.tagName)){const e=o.textContent.split(E),t=e.length-1;if(t>0){o.textContent=C?C.emptyScript:"";for(let i=0;i<t;i++)o.append(e[i],T()),W.nextNode(),n.push({type:2,index:++r});o.append(e[t],T())}}}else if(8===o.nodeType)if(o.data===z)n.push({type:2,index:r});else{let e=-1;for(;-1!==(e=o.data.indexOf(E,e+1));)n.push({type:7,index:r}),e+=E.length-1}r++}}static createElement(e,t){const i=O.createElement("template");return i.innerHTML=e,i}}function Z(e,t,i=e,o){if(t===B)return t;let r=void 0!==o?i._$Co?.[o]:i._$Cl;const s=P(t)?void 0:t._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),void 0===s?r=void 0:(r=new s(e),r._$AT(e,i,o)),void 0!==o?(i._$Co??=[])[o]=r:i._$Cl=r),void 0!==r&&(t=Z(e,r._$AS(e,t.values),r,o)),t}class Y{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,o=(e?.creationScope??O).importNode(t,!0);W.currentNode=o;let r=W.nextNode(),s=0,a=0,n=i[0];for(;void 0!==n;){if(s===n.index){let t;2===n.type?t=new J(r,r.nextSibling,this,e):1===n.type?t=new n.ctor(r,n.name,n.strings,this,e):6===n.type&&(t=new oe(r,this,e)),this._$AV.push(t),n=i[++a]}s!==n?.index&&(r=W.nextNode(),s++)}return W.currentNode=O,o}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class J{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,o){this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Z(this,e,t),P(e)?e===D||null==e||""===e?(this._$AH!==D&&this._$AR(),this._$AH=D):e!==this._$AH&&e!==B&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>j(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==D&&P(this._$AH)?this._$AA.nextSibling.data=e:this.T(O.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,o="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=X.createElement(K(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(t);else{const e=new Y(o,this),i=e.u(this.options);e.p(t),this.T(i),this._$AH=e}}_$AC(e){let t=I.get(e.strings);return void 0===t&&I.set(e.strings,t=new X(e)),t}k(e){j(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const r of e)o===t.length?t.push(i=new J(this.O(T()),this.O(T()),this,this.options)):i=t[o],i._$AI(r),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class Q{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,o,r){this.type=1,this._$AH=D,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=D}_$AI(e,t=this,i,o){const r=this.strings;let s=!1;if(void 0===r)e=Z(this,e,t,0),s=!P(e)||e!==this._$AH&&e!==B,s&&(this._$AH=e);else{const o=e;let a,n;for(e=r[0],a=0;a<r.length-1;a++)n=Z(this,o[i+a],t,a),n===B&&(n=this._$AH[a]),s||=!P(n)||n!==this._$AH[a],n===D?e=D:e!==D&&(e+=(n??"")+r[a+1]),this._$AH[a]=n}s&&!o&&this.j(e)}j(e){e===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ee extends Q{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===D?void 0:e}}class te extends Q{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==D)}}class ie extends Q{constructor(e,t,i,o,r){super(e,t,i,o,r),this.type=5}_$AI(e,t=this){if((e=Z(this,e,t,0)??D)===B)return;const i=this._$AH,o=e===D&&i!==D||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==D&&(i===D||o);o&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class oe{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Z(this,e)}}const re=k.litHtmlPolyfillSupport;re?.(X,J),(k.litHtmlVersions??=[]).push("3.3.1");const se=globalThis;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ae=class extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{const o=i?.renderBefore??t;let r=o._$litPart$;if(void 0===r){const e=i?.renderBefore??null;o._$litPart$=r=new J(t.insertBefore(T(),e),e,void 0,i??{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return B}};ae._$litElement$=!0,ae.finalized=!0,se.litElementHydrateSupport?.({LitElement:ae});const ne=se.litElementPolyfillSupport;ne?.({LitElement:ae}),(se.litElementVersions??=[]).push("4.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const le=e=>(t,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)},ce={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},de=(e=ce,t,i)=>{const{kind:o,metadata:r}=i;let s=globalThis.litPropertyMetadata.get(r);if(void 0===s&&globalThis.litPropertyMetadata.set(r,s=new Map),"setter"===o&&((e=Object.create(e)).wrapped=!0),s.set(i.name,e),"accessor"===o){const{name:o}=i;return{set(i){const r=t.get.call(this);t.set.call(this,i),this.requestUpdate(o,r,e)},init(t){return void 0!==t&&this.C(o,void 0,e,t),t}}}if("setter"===o){const{name:o}=i;return function(i){const r=this[o];t.call(this,i),this.requestUpdate(o,r,e)}}throw Error("Unsupported decorator location: "+o)};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function he(e){return(t,i)=>"object"==typeof i?de(e,t,i):((e,t,i)=>{const o=t.hasOwnProperty(i);return t.constructor.createProperty(i,e),o?Object.getOwnPropertyDescriptor(t,i):void 0})(e,t,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ue(e){return he({...e,state:!0,attribute:!1})}var ge,pe;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(ge||(ge={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(pe||(pe={}));var fe=["closed","locked","off"],_e=function(e,t,i,o){o=o||{},i=null==i?{}:i;var r=new Event(t,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});return r.detail=i,e.dispatchEvent(r),r},ve=function(e){_e(window,"haptic",e)},me=function(e,t,i,o){if(o||(o={action:"more-info"}),!o.confirmation||o.confirmation.exemptions&&o.confirmation.exemptions.some(function(e){return e.user===t.user.id})||(ve("warning"),confirm(o.confirmation.text||"Are you sure you want to "+o.action+"?")))switch(o.action){case"more-info":(i.entity||i.camera_image)&&_e(e,"hass-more-info",{entityId:i.entity?i.entity:i.camera_image});break;case"navigate":o.navigation_path&&function(e,t,i){void 0===i&&(i=!1),i?history.replaceState(null,"",t):history.pushState(null,"",t),_e(window,"location-changed",{replace:i})}(0,o.navigation_path);break;case"url":o.url_path&&window.open(o.url_path);break;case"toggle":i.entity&&(function(e,t){(function(e,t,i){void 0===i&&(i=!0);var o,r=function(e){return e.substr(0,e.indexOf("."))}(t),s="group"===r?"homeassistant":r;switch(r){case"lock":o=i?"unlock":"lock";break;case"cover":o=i?"open_cover":"close_cover";break;default:o=i?"turn_on":"turn_off"}e.callService(s,o,{entity_id:t})})(e,t,fe.includes(e.states[t].state))}(t,i.entity),ve("success"));break;case"call-service":if(!o.service)return void ve("failure");var r=o.service.split(".",2);t.callService(r[0],r[1],o.service_data,o.target),ve("success");break;case"fire-dom-event":_e(e,"ll-custom",o)}};function be(e){return void 0!==e&&"none"!==e.action}var ye={version:"Version",invalid_configuration:"Invalid configuration",show_warning:"Show Warning",show_error:"Show Error",required:"Required",optional:"Optional"},$e={tab:{card:{title:"Card*","chose-card":"Chose a Dashboard Card"},entities:{title:"Entities*","chose-entities":"Chose Entities",labels:{"level-entity":"Level Entity","fill-entity":"Fill State Entity","full-value":"Full Value","full-value-description":"The value when the card will be full."}},actions:{title:"Actions",labels:{"allow-click-through":"Allow Click Through","allow-click-through-help":"When enabled, clicks on individual entities within the card will show their specific more-info dialogs instead of the main entity's dialog. This disables the card's tap and hold actions."}},appearance:{title:"Appearance","choose-colors":"Choose Colors","choose-severity":"Choose Severity",labels:{"level-color":"Level Color","background-color":"Background Color","use-theme-color":"Use Theme Color","color-description":"Set the colors you like for the card. If you want to use the theme colors, just check the box. Theme colors are handy for light/dark mode.","use-severity":"Use Severity","random-start":"Randomly Delayed Start","top-margin":"Top Margin (%)"}}}},we={common:ye,editor:$e},ke={version:"Versjon",invalid_configuration:"Ikke gyldig konfiguration",show_warning:"Vis advarsel",show_error:"Vis feil",required:"Påkrevd",optional:"Valgfri"},Ce={tab:{card:{title:"Kort","chose-card":"Velg Kort"},entities:{title:"Enheter","chose-entities":"Velg Enheter",labels:{"level-entity":"Nivå Enheter","fill-entity":"Fyll Enheter","full-value":"Fullverdi","full-value-description":"Verdien når kortet vil være fullt."}},actions:{title:"Handlinger",labels:{"allow-click-through":"Tillat klikk gjennom","allow-click-through-help":"Når aktivert, vil klikk på individuelle enheter vise deres spesifikke mer-info dialoger i stedet for hovedentitetens dialog. Dette deaktiverer kortets tap- og hold-handlinger."}},appearance:{title:"Utseende","choose-colors":"Velg Farger","choose-severity":"Velg Alvorlighetsgrad",labels:{"level-color":"Nivå Farge","background-color":"Bakgrunnsfarge","use-theme-color":"Bruk Tema Farge","color-description":"Sett fargene du liker for kortet. Hvis du vil bruke temafargene, bare merk av i boksen. Temafarger er hendige for lys/mørk modus.","use-severity":"Bruk Alvorlighetsgrad","random-start":"Tilfeldig Forsinket Start","top-margin":"Toppmargin (%)"}}}},Se={common:ke,editor:Ce},Ae={version:"Versão",invalid_configuration:"Configuração inválida",show_warning:"Mostrar aviso",show_error:"Mostrar erro",required:"Requeridos",optional:"Opcional"},Ee={tab:{card:{title:"Cartão*","chose-card":"Escolha um cartão de painel"},entities:{title:"Entidades*","chose-entities":"Escolher Entidades",labels:{"level-entity":"Entidade de Nível","fill-entity":"Preencher Entidade Estadual","full-value":"Valor Completo","full-value-description":"O valor quando o cartão estará cheio."}},actions:{title:"Ações",labels:{"allow-click-through":"Permitir Clique Direto","allow-click-through-help":"Quando habilitado, cliques em entidades individuais mostrarão seus diálogos de mais informações específicos em vez do diálogo da entidade principal. Isso desabilita as ações de toque e manutenção do cartão."}},appearance:{title:"Aparência","choose-colors":"Escolha as cores","choose-severity":"Escolha a severidade",labels:{"level-color":"Cor do Nível","background-color":"Cor de fundo","use-theme-color":"Usar cor do tema","color-description":"Defina as cores que você gosta para o cartão. Se você quiser usar as cores do tema, basta marcar a caixa. As cores do tema são úteis para o modo claro/escuro.","use-severity":"Usar severidade","random-start":"Início Atrasado Aleatoriamente","top-margin":"Margem Superior (%)"}}}},ze={common:Ae,editor:Ee},xe={version:"Versão",invalid_configuration:"Configuração inválida",show_warning:"Mostrar aviso",show_error:"Mostrar erro",required:"Requerido",optional:"Opcional"},Oe={tab:{card:{title:"Cartão*","chose-card":"Escolha um cartão de painel"},entities:{title:"Entidades*","chose-entities":"Escolher Entidades",labels:{"level-entity":"Entidade de Nível","fill-entity":"Preencher Entidade","full-value":"Valor Completo","full-value-description":"O valor quando o cartão estará cheio."}},actions:{title:"Ações",labels:{"allow-click-through":"Permitir Clique Direto","allow-click-through-help":"Quando habilitado, cliques em entidades individuais mostrarão seus diálogos de mais informações específicos em vez do diálogo da entidade principal. Isso desabilita as ações de toque e manutenção do cartão."}},appearance:{title:"Aparência","choose-colors":"Escolha as cores","choose-severity":"Escolha a severidade",labels:{"level-color":"Cor do Nível","background-color":"Cor de fundo","use-theme-color":"Usar cor do tema","color-description":"Defina as cores que você gosta para o cartão. Se você quiser usar as cores do tema, basta marcar a caixa. As cores do tema são úteis para o modo claro/escuro.","use-severity":"Usar severidade","random-start":"Início Atrasado Aleatoriamente","top-margin":"Margem Superior (%)"}}}},Te={common:xe,editor:Oe},Pe={version:"Verzia",invalid_configuration:"Neplatná konfigurácia",show_warning:"Zobraziť upozornenie",show_error:"Zobraziť chybu",required:"Požadované",optional:"Voliteľné"},je={tab:{card:{title:"Karta*","chose-card":"Vyberte kartu Dashboard Card"},entities:{title:"Entity*","chose-entities":"Zvoliť entity",labels:{"level-entity":"Entita úrovne","fill-entity":"Vyplňte entitu stavu","full-value":"Plná hodnota","full-value-description":"Hodnota, keď bude karta plná."}},actions:{title:"Akcie",labels:{"allow-click-through":"Povoliť kliknutie","allow-click-through-help":"Keď je povolené, kliknutie na jednotlivé entity zobrazí ich špecifické dialógy s ďalšími informáciami namiesto dialógu hlavnej entity. Toto zakáže akcie ťuknutia a podržania karty."}},appearance:{title:"Vzhľad","choose-colors":"Vyberte farby","choose-severity":"Vyberte závažnosť",labels:{"level-color":"Farba úrovne","background-color":"Farba pozadia","use-theme-color":"Použiť farbu témy","color-description":"Nastavte farby, ktoré sa vám páčia pre kartu. Ak chcete použiť farby témy, jednoducho začiarknite políčko. Farby témy sú užitočné pre svetlý/tmavý režim.","use-severity":"Použiť závažnosť","random-start":"Náhodné oneskorené spustenie","top-margin":"Horný okraj (%)"}}}},Me={common:Pe,editor:je},Ue={version:"Version",invalid_configuration:"Ogilltig konfiguration",show_warning:"Visa Varning",show_error:"Visa Fel",required:"Nödvändig",optional:"Valfritt"},Ve={tab:{card:{title:"Kort*","chose-card":"Välj ett Kontrollpanelskort"},entities:{title:"Enheter*","chose-entities":"Välj Enheter",labels:{"level-entity":"Nivåenhet","fill-entity":"Fyllt Tillstånd Enhet","full-value":"Fullt Värde","full-value-description":"Värdet när kortet kommer att vara fullt."}},actions:{title:"Actions",labels:{"allow-click-through":"Tillåt klick igenom","allow-click-through-help":"När aktiverat kommer klick på enskilda enheter att visa deras specifika mer-info dialoger istället för huvudentitetens dialog. Detta inaktiverar kortets tryck- och håll-åtgärder."}},appearance:{title:"Utseende","choose-colors":"Välj färger","choose-severity":"Välj allvarlighetsgrad",labels:{"level-color":"Nivåfärg","background-color":"Bakgrundsfärg","use-theme-color":"Använd Temafärg","color-description":"Ställ in de färger du gillar för kortet. Om du vill använda temafärgerna, kryssa bara i rutan. Temafärger är praktiska för ljus/mörkt läge.","use-severity":"Använd allvarlighetsgrad","random-start":"Slumpmässigt Fördröjd Start","top-margin":"Övre marginal (%)"}}}},qe={common:Ue,editor:Ve},He={version:"Verzió",invalid_configuration:"Hibás konfiguráció",show_warning:"Jelezze a figyelmeztetéseket",show_error:"Jelezze a hibákat",required:"Kötelező",optional:"Opcionális"},Fe={tab:{card:{title:"Kártya*","chose-card":"Válasszon kártyát"},entities:{title:"Entitások*","chose-entities":"Válasszon entitásokat",labels:{"level-entity":"Szint Entitás","fill-entity":"Töltés Entitás","full-value":"Teli Érték","full-value-description":"Az érték, amikor a kártya tele van"}},actions:{title:"Akciók",labels:{"allow-click-through":"Kattintás Engedélyezése","allow-click-through-help":"Ha engedélyezett, az egyes entitásokra való kattintás azok specifikus további-információ párbeszédpaneljeit jeleníti meg a fő entitás párbeszédpanelje helyett. Ez letiltja a kártya érintési és tartási műveleteit."}},appearance:{title:"Megjelenés","choose-colors":"Válasszon színeket","choose-severity":"Válasszon súlyosságot",labels:{"level-color":"Szint Színe","background-color":"Háttér Színe","use-theme-color":"Téma Színe","color-description":"Állítsa be a kártya színeit, amilyenre szeretné. Ha a téma színeit szeretné használni, csak jelölje be a négyzetet. A téma színek hasznosak a világos/sötét módban.","use-severity":"Használja a súlyosságot","random-start":"Véletlenszerűen késleltetett rajzolás","top-margin":"Felső margó (%)"}}}},Le={common:He,editor:Fe};const Ne={en:Object.freeze({__proto__:null,common:ye,default:we,editor:$e}),nb:Object.freeze({__proto__:null,common:ke,default:Se,editor:Ce}),ptbr:Object.freeze({__proto__:null,common:Ae,default:ze,editor:Ee}),ptpt:Object.freeze({__proto__:null,common:xe,default:Te,editor:Oe}),sk:Object.freeze({__proto__:null,common:Pe,default:Me,editor:je}),sv:Object.freeze({__proto__:null,common:Ue,default:qe,editor:Ve}),hu:Object.freeze({__proto__:null,common:He,default:Le,editor:Fe})};function Re(e,t="",i=""){const o=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let r;try{r=e.split(".").reduce((e,t)=>e[t],Ne[o])}catch(t){r=e.split(".").reduce((e,t)=>e[t],Ne.en)}return void 0===r&&(r=e.split(".").reduce((e,t)=>e[t],Ne.en)),""!==t&&""!==i&&(r=r.replace(t,i)),r}const Be=[0,128,0],De=[28,28,28],Ie="--primary-background-color",We="--primary-color";function Ke(e,t){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${t})`}function Ge(e){var t;if("string"!=typeof e)return e;const i=document.createElement("div");document.body.appendChild(i),i.style.color=e;const o=null===(t=getComputedStyle(i).color.match(/[\.\d]+/g))||void 0===t?void 0:t.map(Number);return i.remove(),o}function Xe(e,t){const i=document.querySelector("body"),o=document.createElement("ha-card");i.appendChild(o);const r=Ge(getComputedStyle(o).getPropertyValue(e));return o.remove(),r||t}const Ze=[{slug:"card",localizedLabel:Re("editor.tab.card.title"),renderer:"renderCardTab",enabled:!0},{slug:"entities",localizedLabel:Re("editor.tab.entities.title"),renderer:"renderEntitiesTab",enabled:!0},{slug:"appearance",localizedLabel:Re("editor.tab.appearance.title"),renderer:"renderAppearanceTab",enabled:!0},{slug:"actions",localizedLabel:Re("editor.tab.actions.title"),renderer:"renderActionsTab",enabled:!0}],Ye={required:{icon:"tune",name:"Required",secondary:"Required options for this card to function",show:!0},actions:{icon:"gesture-tap-hold",name:"Actions",secondary:"Perform actions based on tapping/clicking",show:!1,options:{tap:{icon:"gesture-tap",name:"Tap",secondary:"Set the action to perform on tap",show:!1},hold:{icon:"gesture-tap-hold",name:"Hold",secondary:"Set the action to perform on hold",show:!1},double_tap:{icon:"gesture-double-tap",name:"Double Tap",secondary:"Set the action to perform on double tap",show:!1}}},appearance:{icon:"palette",name:"Appearance",secondary:"Customize the name, icon, etc",show:!1}};let Je=class extends ae{constructor(){super(...arguments),this._selectedTab=0,this._GUImode=!0,this._guiModeAvailable=!0,this._initialized=!1,this._computeActionLabel=e=>{var t,i,o,r,s,a;switch(e.name){case"tap_action":return`${null===(t=this.hass)||void 0===t?void 0:t.localize("ui.panel.lovelace.editor.card.generic.tap_action")} (${null===(i=this.hass)||void 0===i?void 0:i.localize("ui.panel.lovelace.editor.card.config.optional")})`;case"hold_action":return`${null===(o=this.hass)||void 0===o?void 0:o.localize("ui.panel.lovelace.editor.card.generic.hold_action")} (${null===(r=this.hass)||void 0===r?void 0:r.localize("ui.panel.lovelace.editor.card.config.optional")})`;case"double_tap_action":return`${null===(s=this.hass)||void 0===s?void 0:s.localize("ui.panel.lovelace.editor.card.generic.double_tap_action")} (${null===(a=this.hass)||void 0===a?void 0:a.localize("ui.panel.lovelace.editor.card.config.optional")})`;default:return e.name}}}setConfig(e){this._config=e,this.loadCardHelpers()}shouldUpdate(){return this._initialized||this._initialize(),!0}get _name(){var e;return(null===(e=this._config)||void 0===e?void 0:e.name)||""}get _entity(){var e;return(null===(e=this._config)||void 0===e?void 0:e.entity)||""}get _fill_entity(){var e;return(null===(e=this._config)||void 0===e?void 0:e.fill_entity)||""}get _show_warning(){var e;return(null===(e=this._config)||void 0===e?void 0:e.show_warning)||!1}get _show_error(){var e;return(null===(e=this._config)||void 0===e?void 0:e.show_error)||!1}get _tap_action(){var e;return(null===(e=this._config)||void 0===e?void 0:e.tap_action)||{action:"none"}}get _hold_action(){var e;return(null===(e=this._config)||void 0===e?void 0:e.hold_action)||{action:"none"}}get _double_tap_action(){var e;return(null===(e=this._config)||void 0===e?void 0:e.double_tap_action)||{action:"none"}}get _full_value(){var e,t;return null!==(t=null===(e=this._config)||void 0===e?void 0:e.full_value)&&void 0!==t?t:100}get _severity(){var e;return(null===(e=this._config)||void 0===e?void 0:e.severity)||[]}get _random_start(){var e;return(null===(e=this._config)||void 0===e?void 0:e.random_start)||!1}get _top_margin(){var e,t;const i=null!==(t=null===(e=this._config)||void 0===e?void 0:e.top_margin)&&void 0!==t?t:0;return"number"!=typeof i||isNaN(i)?0:Math.max(0,Math.min(20,Math.round(i)))}get _allow_click_through(){var e;return(null===(e=this._config)||void 0===e?void 0:e.allow_click_through)||!1}get usesLevelThemeColor(){var e;return void 0===(null===(e=this._config)||void 0===e?void 0:e.level_color)}get usesBackgroundThemeColor(){var e;return void 0===(null===(e=this._config)||void 0===e?void 0:e.background_color)}render(){return this.hass&&this._helpers?(this._helpers.importMoreInfoControl("climate"),R` <div class="card-config">${this.renderToolbar()}</div> `):R``}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&(this._initialized=!0)}renderToolbar(){const e=this._selectedTab;return R` <div class="toolbar">
      <sl-tab-group @sl-tab-show=${this._handleTabShow}>
        ${Ze.map((t,i)=>t.enabled?R`
                <sl-tab slot="nav" panel="tab-${i}" ?active=${i===e}> ${t.localizedLabel} </sl-tab>
              `:null)}
        ${Ze.map((t,i)=>{if(!t.enabled)return null;const o=i===e?this[t.renderer]():"";return R` <sl-tab-panel name="tab-${i}"> ${o} </sl-tab-panel> `})}
      </sl-tab-group>
    </div>`}renderCardTab(){var e,t;return(null===(e=this._config)||void 0===e?void 0:e.card)?R`
          <hui-card-element-editor
            .hass=${this.hass}
            .value=${null===(t=this._config)||void 0===t?void 0:t.card}
            .lovelace=${this.lovelace}
            @config-changed=${this._handleConfigChanged}
            @GUImode-changed=${this._handleGUIModeChanged}
          ></hui-card-element-editor>
          <mwc-button @click=${this._handleCardDropped}>Choose a different card</mwc-button>
        `:R`
          <h3>${Re("editor.tab.card.chose-card")} (${Re("common.required")})</h3>
          <hui-card-picker
            .hass=${this.hass}
            .lovelace=${this.lovelace}
            @config-changed=${this._handleCardPicked}
          ></hui-card-picker>
        `}renderEntitiesTab(){var e,t;return this.hass&&this._helpers?R`
      <h3>${Re("editor.tab.entities.chose-entities")} (${Re("common.required")})</h3>
      <div class="entities">
        <div class="entity-row">
          <ha-entity-picker
            .hass=${this.hass}
            .value=${null===(e=this._config)||void 0===e?void 0:e.entity}
            .label="${Re("editor.tab.entities.labels.level-entity")} (${Re("common.required")})"
            .configValue=${"entity"}
            .required=${!0}
            include-domains='["input_number","sensor"]'
            @value-changed=${this._valueChanged}
            allow-custom-entity
          ></ha-entity-picker>
        </div>
        <div class="entity-row">
          <ha-entity-picker
            .hass=${this.hass}
            .value=${null===(t=this._config)||void 0===t?void 0:t.fill_entity}
            .label="${Re("editor.tab.entities.labels.fill-entity")} (${Re("common.optional")})"
            .configValue=${"fill_entity"}
            include-domains='["input_boolean","switch", "sensor", "binary_sensor"]'
            @value-changed=${this._valueChanged}
            allow-custom-entity
          ></ha-entity-picker>
        </div>
        <div class="entity-row">
          <ha-textfield
            type="number"
            .label="${Re("editor.tab.entities.labels.full-value")} (${Re("editor.tab.entities.labels.full-value-description")})"
            .configValue=${"full_value"}
            .value=${this._full_value}
            @change=${this._valueChanged}
          ></ha-textfield>
        </div>
      </div>
    `:R``}renderActionsTab(){return R`
      <div class="form-row-dual">
        <ha-formfield label=${Re("editor.tab.actions.labels.allow-click-through")}>
          <ha-switch .checked=${this._allow_click_through} @change=${this._toggleClickThrough}> </ha-switch>
        </ha-formfield>
      </div>
      <div class="help-text">${Re("editor.tab.actions.labels.allow-click-through-help")}</div>

      ${this._renderActionEditors()}
    `}_renderActionEditors(){return this._allow_click_through?"":R`
      <ha-form
        .hass=${this.hass}
        .data=${{tap_action:this._tap_action,hold_action:this._hold_action,double_tap_action:this._double_tap_action}}
        .schema=${[{name:"tap_action",selector:{ui_action:{default_action:"more-info"}}},{name:"hold_action",selector:{ui_action:{default_action:"more-info"}}},{name:"double_tap_action",selector:{ui_action:{default_action:"none"}}}]}
        .computeLabel=${this._computeActionLabel}
        @value-changed=${this._actionChanged}
      ></ha-form>
    `}renderAppearanceTab(){var e,t;const i=Xe(We,Be),o=Xe(Ie,De);return R`
      <h3>${Re("editor.tab.appearance.choose-colors")}</h3>
      <p>${Re("editor.tab.appearance.labels.color-description")}</p>
      <div class="form-row-dual">
        <ha-selector
          .hass=${this.hass}
          .selector=${{color_rgb:{}}}
          .label=${Re("editor.tab.appearance.labels.level-color")}
          .value=${(null===(e=this._config)||void 0===e?void 0:e.level_color)||i}
          .configValue=${"level_color"}
          @value-changed=${this._levelColorChanged}
        ></ha-selector>
        <ha-formfield label=${Re("editor.tab.appearance.labels.use-theme-color")}>
          <ha-switch .checked=${this.usesLevelThemeColor} @change=${this._toggleLevelDefaultColor}> </ha-switch>
        </ha-formfield>
      </div>
      <div class="form-row-dual">
        <ha-selector
          .hass=${this.hass}
          .selector=${{color_rgb:{}}}
          .label=${Re("editor.tab.appearance.labels.background-color")}
          .value=${(null===(t=this._config)||void 0===t?void 0:t.background_color)||o}
          .configValue=${"background_color"}
          @value-changed=${this._backgroundColorChanged}
        ></ha-selector>
        <ha-formfield label=${Re("editor.tab.appearance.labels.use-theme-color")}>
          <ha-switch .checked=${this.usesBackgroundThemeColor} @change=${this._toggleBackgroundDefaultColor}>
          </ha-switch>
        </ha-formfield>
      </div>
      <div class="form-row-dual">
        <ha-formfield label=${Re("editor.tab.appearance.labels.random-start")}>
          <ha-switch .checked=${!0===this._random_start} @change=${this._toggelRandomStart}> </ha-switch>
        </ha-formfield>
      </div>
      <div class="form-row-dual">
        <ha-selector
          .hass=${this.hass}
          .selector=${{number:{min:0,max:20,step:1,mode:"slider"}}}
          .label=${Re("editor.tab.appearance.labels.top-margin")}
          .value=${this._top_margin}
          .configValue=${"top_margin"}
          @value-changed=${this._selectorChanged}
        ></ha-selector>
      </div>
      <div class="form-row-dual">
        <ha-formfield label=${Re("editor.tab.appearance.labels.use-severity")}>
          <ha-switch .checked=${this._severity.length>0} @change=${this._toggleSeverity}> </ha-switch>
        </ha-formfield>
      </div>

      ${this.severitySection()}
    `}severitySection(){var e;return this._severity.length>0?R`
        <h3>${Re("editor.tab.appearance.choose-severity")}</h3>
        <ha-icon-button
          .label=${(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.add"))||"Add"}
          .path=${"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}
          @click=${this._addSeverity}
        ></ha-icon-button>
        ${this._severity.map(e=>this.severityItem(e))}
      `:R``}severityItem(e){var t;const i=Ge(e.color),o=this._severity.indexOf(e);return R`
      <div class="form-row-tripple">
        <ha-selector
          .hass=${this.hass}
          .selector=${{color_rgb:{}}}
          .value=${i}
          .index=${o}
          @value-changed=${this._severityColorChanged}
        ></ha-selector>

        <ha-textfield
          type="number"
          .configValue=${"full_value"}
          .value=${e.value}
          .index=${o}
          @change=${this._severityValueChanged}
        ></ha-textfield>

        <ha-icon-button
          .label=${(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.remove"))||"Remove"}
          .path=${"M19,13H5V11H19V13Z"}
          .index=${o}
          @click=${this._removeSeverity}
        ></ha-icon-button>
      </div>
    `}_toggleLevelDefaultColor(){this._config&&(this.usesLevelThemeColor?this._config=Object.assign(Object.assign({},this._config),{level_color:this._lastUsedLevelColor}):this._config=Object.assign(Object.assign({},this._config),{level_color:void 0}),_e(this,"config-changed",{config:this._config}))}_toggleBackgroundDefaultColor(){this._config&&(this.usesBackgroundThemeColor?this._config=Object.assign(Object.assign({},this._config),{background_color:this._lastUsedBackgroundColor}):this._config=Object.assign(Object.assign({},this._config),{background_color:void 0}),_e(this,"config-changed",{config:this._config}))}_toggleSeverity(){this._config&&(this._severity.length>0?this._config=Object.assign(Object.assign({},this._config),{severity:[]}):this._config=Object.assign(Object.assign({},this._config),{severity:[{color:"#FF0000",value:0}]}),_e(this,"config-changed",{config:this._config}))}_toggelRandomStart(){this._config&&(this._config=Object.assign(Object.assign({},this._config),{random_start:!this._random_start}),_e(this,"config-changed",{config:this._config}))}_toggleClickThrough(){this._config&&(this._allow_click_through?this._config=Object.assign(Object.assign({},this._config),{allow_click_through:!1}):this._config=Object.assign(Object.assign({},this._config),{allow_click_through:!0}),_e(this,"config-changed",{config:this._config}))}_addSeverity(){this._config&&(this._config=Object.assign(Object.assign({},this._config),{severity:[...this._severity,{color:"#FF0000",value:0}]}),_e(this,"config-changed",{config:this._config}))}_removeSeverity(e){if(!this._config)return;const[t]=this._getSeverityItemFormEvent(e);this._config=Object.assign(Object.assign({},this._config),{severity:this._severity.filter((e,i)=>i!==t)}),_e(this,"config-changed",{config:this._config})}_severityColorChanged(e){if(!this._config)return;const t=e.target;let i=this._severity[t.index];const o=e.detail.value,r=[...this._severity];i=Object.assign(Object.assign({},i),{color:o}),r[t.index]=i,this._config=Object.assign(Object.assign({},this._config),{severity:r}),_e(this,"config-changed",{config:this._config})}_severityValueChanged(e){if(!this._config)return;const t=e.target,i=t.index,o=t.value;let r=this._severity[i];const s=[...this._severity];r=Object.assign(Object.assign({},r),{value:parseFloat(o)}),s[i]=r,this._config=Object.assign(Object.assign({},this._config),{severity:s}),_e(this,"config-changed",{config:this._config})}_getSeverityItemFormEvent(e){const t=e.target,i=t.index;return[i,t.value,this._severity[i]]}_handleCardPicked(e){if(e.stopPropagation(),!this._config)return;const t=e.detail.config;this._config=Object.assign(Object.assign({},this._config),{card:t}),_e(this,"config-changed",{config:this._config})}_handleCardDropped(){this._config&&(this._config=Object.assign(Object.assign({},this._config),{card:void 0}))}_handleConfigChanged(e){if(e.stopPropagation(),!this._config)return;const t=e.detail.config;this._config=Object.assign(Object.assign({},this._config),{card:t}),this._guiModeAvailable=e.detail.guiModeAvailable,_e(this,"config-changed",{config:this._config})}_handleGUIModeChanged(e){e.stopPropagation(),this._GUImode=e.detail.guiMode,this._guiModeAvailable=e.detail.guiModeAvailable}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}_toggleAction(e){this._toggleThing(e,Ye.actions.options)}_toggleOption(e){this._toggleThing(e,Ye)}_toggleThing(e,t){const i=e.target,o=!t[i.option].show;for(const[e]of Object.entries(t))t[e].show=!1;t[i.option].show=o,this._toggle=!this._toggle}_levelColorChanged(e){if(!this._config)return;const t=e.detail.value;this._lastUsedLevelColor=t,this._config=Object.assign(Object.assign({},this._config),{level_color:t}),_e(this,"config-changed",{config:this._config})}_backgroundColorChanged(e){if(!this._config)return;const t=e.detail.value;this._lastUsedBackgroundColor=t,this._config=Object.assign(Object.assign({},this._config),{background_color:t}),_e(this,"config-changed",{config:this._config})}_valueChanged(e){var t;if(!this._config||!this.hass||""===(null===(t=e.target)||void 0===t?void 0:t.value))return;const i=e.target;if(this[`_${i.configValue}`]!==i.value){if(i.configValue)if(""===i.value){const e=Object.assign({},this._config);delete e[i.configValue],this._config=e}else this._config=Object.assign(Object.assign({},this._config),{[i.configValue]:i.value});_e(this,"config-changed",{config:this._config})}}_selectorChanged(e){if(!this._config||!this.hass)return;const t=e.target,i=e.detail.value,o=t.configValue;if(!o)return;const r=this._sanitizeConfigValue(o,i);this[`_${o}`]!==r&&this._updateConfig(o,r)}_sanitizeConfigValue(e,t){return"top_margin"===e?this._sanitizeTopMargin(t):t}_sanitizeTopMargin(e){const t="number"==typeof e?e:parseFloat(e);return isNaN(t)||t<0?0:t>20?20:Math.round(t)}_updateConfig(e,t){if(this._config){if(this._shouldAlwaysKeepConfigKey(e))this._setConfigValue(e,t);else if(""===t||null==t){const t=Object.assign({},this._config);delete t[e],this._config=t}else this._setConfigValue(e,t);_e(this,"config-changed",{config:this._config})}}_setConfigValue(e,t){this._config&&(this._config=Object.assign(Object.assign({},this._config),{[e]:t}))}_shouldAlwaysKeepConfigKey(e){return["top_margin"].includes(e)}_actionChanged(e){if(!this._config||!this.hass)return;const t=e.detail.value;if(!t||"object"!=typeof t)return;const i=Object.assign({},this._config);void 0!==t.tap_action&&(t.tap_action&&"none"!==t.tap_action.action?i.tap_action=t.tap_action:delete i.tap_action),void 0!==t.hold_action&&(t.hold_action&&"none"!==t.hold_action.action?i.hold_action=t.hold_action:delete i.hold_action),void 0!==t.double_tap_action&&(t.double_tap_action&&"none"!==t.double_tap_action.action?i.double_tap_action=t.double_tap_action:delete i.double_tap_action),_e(this,"config-changed",{config:i})}_handleTabShow(e){const t=e.detail.name,i=parseInt(t.replace("tab-",""),10);this._selectedTab=i}static get styles(){return a`
      .toolbar {
        display: flex;
        flex-direction: column;
      }
      sl-tab-group {
        --sl-color-primary-600: var(--primary-color);
        --sl-color-neutral-200: var(--divider-color);
        --sl-font-size-medium: 14px;
      }
      sl-tab::part(base) {
        color: var(--secondary-text-color);
        padding: 12px 16px;
      }
      sl-tab[active]::part(base) {
        color: var(--primary-color);
      }
      sl-tab-panel::part(base) {
        padding: 16px 0;
      }
      .option {
        padding: 4px 0px;
        cursor: pointer;
      }
      .entities {
        display: flex;
        flex-direction: column;
      }
      .entity-row {
        display: flex;
        margin-bottom: 14px;
        flex-grow: 1;
      }
      .entity-row > * {
        min-width: 100%;
      }
      .form-row-dual {
        margin-bottom: 14px;
        display: grid;
        grid-template-columns: 1fr auto;
      }
      .form-row-dual > :last-child {
        margin-inline: 8px;
      }
      .form-row-tripple {
        margin-bottom: 14px;
        display: grid;
        grid-template-columns: 1fr 1fr 48px;
      }
      .form-row-tripple > :not(:first-child) {
        margin-inline: 8px;
      }
      .title {
        padding-left: 16px;
        margin-top: -6px;
        pointer-events: none;
      }
      .secondary {
        padding-left: 40px;
        color: var(--secondary-text-color);
        pointer-events: none;
      }
      .values {
        padding-left: 16px;
        background: var(--secondary-background-color);
        display: grid;
      }
      ha-formfield {
        padding-bottom: 8px;
      }
      #editor {
        border: 1px solid var(--divider-color);
        padding: 12px;
      }
    `}};function Qe(){let e,t,i,o,r,s,a,n=null,l=0,c=!1;const d={drawShadow:!0,drawText:!0,drawPercentageSign:!0,drawBubbles:!1,fontSize:"70px",fontFamily:"Arial",fontFillStyle:"white",size:300,width:300,levelOffset:0,borderWidth:25,backgroundColor:"#e2e2e2",foregroundColor:"#fafafa",top_margin:0};let h=0,u=0;const g={fillStyle:"purple",angle:0,horizontalPosition:0,angularSpeed:0,maxAmplitude:9,frequency:30,horizontalSpeed:-150,initialHeight:0},p={fillStyle:"pink",angle:0,horizontalPosition:0,angularSpeed:140,maxAmplitude:12,frequency:40,horizontalSpeed:150,initialHeight:0},f={bubbles:[],amount:12,amountLimit:12,speed:20,current:0,swing:0,size:2,reset:function(e){const t=w(),i=k();e.r=$(this.size,2*this.size)/2,e.x=$(0,d.width),e.y=$(t,t-i),e.velX=0,e.velY=$(this.speed,2*this.speed),e.swing=$(0,2*Math.PI)},init(){const e=w(),t=k();for(let i=0;i<this.amount;i++)this.bubbles.push({x:$(0,d.width),y:$(e,e-t),r:$(this.size,2*this.size)/2,velX:0,velY:$(this.speed,2*this.speed)})}};function _(e){if(c)return;const i=null!=e?e:(new Date).getTime();l=(e-(n||i))/1e3,n=e,a=i-s,a>o&&(t&&t.clearRect(0,0,d.width,d.height),function(){const e=.5*d.size,i=.5*d.size,o=y()-d.borderWidth;if(e<0||i<0||o<0)return;t&&(t.save(),t.fillStyle=d.backgroundColor,t.beginPath(),t.arc(.5*d.size,.5*d.size,y()-d.borderWidth,0,2*Math.PI),t.rect(0,0,d.width,d.height),t.closePath(),t.fill(),t.restore())}(),t&&(t.save(),v(p),v(g),d.drawBubbles&&m(),t.restore()),d.drawText&&function(){const e=d.drawPercentageSign?h.toFixed(0)+"%":h.toFixed(0);t&&(t.save(),t.font=d.fontSize+" "+d.fontFamily,t.fillStyle=d.fontFillStyle,t.textAlign="center",t.textBaseline="middle",t.filter="drop-shadow(0px 0px 5px rgba(0,0,0,0.4))",t.fillText(e,d.size/2,d.size/2),t.restore())}()),requestAnimationFrame(_)}function v(e){e.angularSpeed>0&&(e.angle+=e.angularSpeed*l,e.angle=e.angle<0?e.angle+360:e.angle),e.horizontalPosition+=e.horizontalSpeed*l,e.horizontalSpeed>0?e.horizontalPosition=e.horizontalPosition>Math.pow(2,53)?0:e.horizontalPosition:e.horizontalPosition<0&&(e.horizontalPosition=e.horizontalPosition<-1*Math.pow(2,53)?0:e.horizontalPosition);let i=0,o=0;const r=e.maxAmplitude*Math.sin(e.angle*Math.PI/180),s=w(),a=k();if(h<u?h+=15*l:h>u&&(h-=15*l),e.initialHeight=s-a,t){for(t.save(),t.beginPath(),t.lineTo(0,e.initialHeight);i<d.size;)o=e.initialHeight+r*Math.sin((i+e.horizontalPosition)/e.frequency),t.lineTo(i,o),i++;t.lineTo(i,d.size),t.lineTo(0,d.size),t.closePath(),t.fillStyle=e.fillStyle,t.fill(),t.clip(),t.restore()}}function m(){if(!t)return;t.save();const e=w(),i=k();f.bubbles.forEach((o,r)=>{u>10&&r<Math.max(f.amountLimit-1,1)&&function(e,i,o){if(!t)return;const r=o-i,s=(e.y-r)/(o-r);t.beginPath(),t.strokeStyle=`rgba(255,255,255, ${s})`,t.arc(e.x,e.y,e.r,0,2*Math.PI,!1),t.stroke(),t.closePath();const a=f.current*l;let n=f.swing;const c=n+=.03;e.velX=Math.abs(e.velX)<Math.abs(f.current)?e.velX+a:f.current,e.y=e.y-e.velY*l,e.x+=(n?.4*Math.cos(c)*n:0)+.5*e.velX,e.y<=o-i+10&&f.reset(e)}(o,i,e)}),t.restore()}function b(e,t,i){return Math.min(Math.max(e,t),i)}function y(){return.9*d.size}function $(e,t){const i=t-e;return t===e?e:Math.random()*i+e}function w(){var e;return null!==(e=d.height)&&void 0!==e?e:0-d.levelOffset-.5*(d.size-y())-d.borderWidth}function k(){const e=d.height,t=(d.top_margin||0)/100*e;return h*(e-t)/100}function C(e,t){e.fillStyle=t.fillStyle||e.fillStyle,e.angularSpeed=t.angularSpeed||e.angularSpeed,e.maxAmplitude=t.maxAmplitude||e.maxAmplitude,e.frequency=t.frequency||e.frequency,e.horizontalSpeed=t.horizontalSpeed||e.horizontalSpeed}return{init:function(o){if(!o.targetContainer)throw new Error("empty or invalid container");var r;i=o.targetContainer,u=b(o.fillPercentage,0,100),o.options&&(r=o.options,d.drawShadow=!1!==r.drawShadow,d.size=r.size,d.width=r.width,d.height=r.height,d.drawBubbles=!1!==r.drawBubbles,d.borderWidth=r.borderWidth||d.borderWidth,d.foregroundFluidColor=r.foregroundFluidColor||d.foregroundFluidColor,d.backgroundFluidColor=r.backgroundFluidColor||d.backgroundFluidColor,d.backgroundColor=r.backgroundColor||d.backgroundColor,d.foregroundColor=r.foregroundColor||d.foregroundColor,d.top_margin=r.top_margin||0,d.drawText=!1!==r.drawText,d.drawPercentageSign=!1!==r.drawPercentageSign,d.fontSize=r.fontSize||d.fontSize,d.fontFamily=r.fontFamily||d.fontFamily,d.fontFillStyle=r.fontFillStyle||d.fontFillStyle,r.foregroundFluidLayer&&C(g,r.foregroundFluidLayer),r.backgroundFluidLayer&&C(p,r.backgroundFluidLayer)),f.init(),e=document.createElement("canvas"),e.width=d.width,e.height=d.height,t=e.getContext("2d"),t&&(t.imageSmoothingEnabled=!0,i.appendChild(e),d.drawShadow&&(t.save(),t.beginPath(),t.filter="drop-shadow(0px 4px 6px rgba(0,0,0,0.1))",t.arc(.5*d.size,.5*d.size,.5*y(),0,2*Math.PI),t.closePath(),t.fill(),t.restore())),this.start(o.options.randomStart||!1)},setPercentage(e){u=b(e,0,100),f.amountLimit=Math.round(f.amount*(u/100))},setDrawBubbles(e){if(!e)return void(d.drawBubbles=!1);requestAnimationFrame(()=>{const e=(new Date).getTime();l=(e-(n||e))/1e3,d.drawBubbles=!0,m()})},setColor(e,t){p.fillStyle=t,g.fillStyle=e},setBackGroundColor(e){if(e.length<3)return;const t=e.length>3?e[3]:1;d.backgroundColor=Ke(e,t)},setLevelColor(e){if(e.length<3)return;const t=e.length>3?e[3]:1,i=.3*t;g.fillStyle=Ke(e,t),p.fillStyle=Ke(e,i)},resizeCanvas(i){d.width=i.width,d.height=i.height,d.size=Math.max(i.height,i.width),e&&(e.width=i.width,e.height=i.height,t=e.getContext("2d"))},stop(){c=!0},start(e=!1){const t=()=>{c=!1,o=1e3/30,s=window.performance.now(),r=s,_(r)};if(e){if(e){const e=800*$(0,3);return c=!0,void setTimeout(()=>{t()},e)}}else t()}}}e([he({attribute:!1})],Je.prototype,"hass",void 0),e([he({attribute:!1})],Je.prototype,"lovelace",void 0),e([ue()],Je.prototype,"_config",void 0),e([ue()],Je.prototype,"_selectedTab",void 0),e([ue()],Je.prototype,"_GUImode",void 0),e([ue()],Je.prototype,"_guiModeAvailable",void 0),e([ue()],Je.prototype,"_toggle",void 0),e([ue()],Je.prototype,"_helpers",void 0),Je=e([le("fluid-level-background-card-editor")],Je);let et=class extends ae{constructor(){super(...arguments),this.backgroundColor=De,this.levelColor=Be,this.filling=!1,this.randomStart=!1,this.topMargin=0,this.fm=Qe()}render(){return R` <div class="fluid-background"></div> `}requestUpdate(e,t){var i,o,r;if("value"===e&&(this.fm.setPercentage(this.value),super.requestUpdate(e,t)),"size"===e&&((null==t?void 0:t.width)===(null===(i=this.size)||void 0===i?void 0:i.width)&&(null==t?void 0:t.height)===(null===(o=this.size)||void 0===o?void 0:o.height)||this.updateSize()),"backgroundColor"===e&&this.setBackgroundColor(this.backgroundColor),"levelColor"===e&&this.setLevelColor(this.levelColor),"filling"===e&&this.setBubbles(this.filling),"randomStart"===e&&this.setRandomStart(this.randomStart),"topMargin"===e){const e=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector(".fluid-background");e&&(this.fm.stop(),this.initFluidMeter(e))}}setRandomStart(e){this.fm&&this.fm.start(e)}setBubbles(e){this.fm&&this.fm.setDrawBubbles(e)}setBackgroundColor(e){this.fm&&e&&this.fm.setBackGroundColor(e)}setLevelColor(e){this.fm&&e&&this.fm.setLevelColor(e)}updateSize(){this.size&&this.size.width&&this.size.height&&this.fm.resizeCanvas(this.size)}firstUpdated(){window.setTimeout(()=>{var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".fluid-background");t&&this.initFluidMeter(t)},0)}initFluidMeter(e){var t,i,o,r;const s=Math.max(null===(t=this.size)||void 0===t?void 0:t.width,null===(i=this.size)||void 0===i?void 0:i.height),a=this.levelColor.length>3?this.levelColor[3]:1,n=.3*a,l={targetContainer:e,fillPercentage:this.value,options:{fontFamily:"Raleway",drawPercentageSign:!1,drawBubbles:this.filling,drawShadow:!1,drawText:!1,size:s,levelOffset:0,width:null===(o=this.size)||void 0===o?void 0:o.width,height:null===(r=this.size)||void 0===r?void 0:r.height,borderWidth:0,backgroundColor:Ke(this.backgroundColor,a),foregroundColor:"rgba(28, 28, 28,.5)",foregroundFluidLayer:{fillStyle:Ke(this.levelColor,n),angularSpeed:100,maxAmplitude:8,frequency:30,horizontalSpeed:-75},backgroundFluidLayer:{fillStyle:Ke(this.levelColor,n),angularSpeed:100,maxAmplitude:6,frequency:30,horizontalSpeed:75},randomStart:this.randomStart,top_margin:this.topMargin}};this.fm.init(l)}static get styles(){return a`
      :host {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    `}};e([he()],et.prototype,"haCard",void 0),e([he({type:Object})],et.prototype,"size",void 0),e([he({type:Number})],et.prototype,"value",void 0),e([he({type:Array})],et.prototype,"backgroundColor",void 0),e([he({type:Array})],et.prototype,"levelColor",void 0),e([he({type:Boolean})],et.prototype,"filling",void 0),e([he({type:Boolean})],et.prototype,"randomStart",void 0),e([he({type:Number})],et.prototype,"topMargin",void 0),et=e([le("fluid-background")],et);class tt{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const it="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0;class ot extends HTMLElement{constructor(){super(),this.holdTime=500,this.held=!1,this.ripple=document.createElement("mwc-ripple")}connectedCallback(){Object.assign(this.style,{position:"absolute",width:it?"100px":"50px",height:it?"100px":"50px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:"999"}),this.appendChild(this.ripple),this.ripple.primary=!0,["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach(e=>{document.addEventListener(e,()=>{clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0},{passive:!0})})}bind(e,t){if(e.actionHandler)return;e.actionHandler=!0,e.addEventListener("contextmenu",e=>{const t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1});const i=e=>{let t,i;this.held=!1,e.touches?(t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),this.timer=window.setTimeout(()=>{this.startAnimation(t,i),this.held=!0},this.holdTime)},o=i=>{i.preventDefault(),["touchend","touchcancel"].includes(i.type)&&void 0===this.timer||(clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0,this.held?_e(e,"action",{action:"hold"}):t.hasDoubleClick?"click"===i.type&&i.detail<2||!this.dblClickTimeout?this.dblClickTimeout=window.setTimeout(()=>{this.dblClickTimeout=void 0,_e(e,"action",{action:"tap"})},250):(clearTimeout(this.dblClickTimeout),this.dblClickTimeout=void 0,_e(e,"action",{action:"double_tap"})):_e(e,"action",{action:"tap"}))};e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchend",o),e.addEventListener("touchcancel",o),e.addEventListener("mousedown",i,{passive:!0}),e.addEventListener("click",o),e.addEventListener("keyup",e=>{13===e.keyCode&&o(e)})}startAnimation(e,t){Object.assign(this.style,{left:`${e}px`,top:`${t}px`,display:null}),this.ripple.disabled=!1,this.ripple.active=!0,this.ripple.unbounded=!0}stopAnimation(){this.ripple.active=!1,this.ripple.disabled=!0,this.style.display="none"}}customElements.define("action-handler-fluid-level-background-card",ot);const rt=(e,t)=>{const i=(()=>{const e=document.body;if(e.querySelector("action-handler-fluid-level-background-card"))return e.querySelector("action-handler-fluid-level-background-card");const t=document.createElement("action-handler-fluid-level-background-card");return e.appendChild(t),t})();i&&i.bind(e,t)},st=(e=>(...t)=>({_$litDirective$:e,values:t}))(class extends tt{update(e,[t]){return rt(e.element,t),B}render(e){}});var at="0.1.8.6";console.info(`%c  fluid-level-background-card \n%c  ${Re("common.version")} ${at}    `,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"fluid-level-background-card",name:"Fluid Level Background Card",description:"A card that has a fluid level as the background"});let nt=class extends ae{constructor(){super(...arguments),this.backgroundColor=Xe(Ie,De),this._full_value=100,this._severity=[],this._random_start=!1,this._top_margin=0,this.resizeObserver=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{e.forEach(e=>this.updateSize(e.contentRect))})})}static async getConfigElement(){return document.createElement("fluid-level-background-card-editor")}static getStubConfig(){return{}}setConfig(e){if(!e)throw new Error(Re("common.invalid_configuration"));e.test_gui&&function(){var e=document.querySelector("home-assistant");if(e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root")){var t=e.lovelace;return t.current_view=e.___curView,t}return null}().setEditMode(!0),this.config=Object.assign({name:"FluidLevelBackgroundCard"},e),e.card&&window.loadCardHelpers().then(({createCardElement:t})=>{var i,o;this._card=this._createCardElement(t,e.card),this._level_entity=e.entity,this._fill_entity=e.fill_entity,this._level_color=e.level_color&&Ge(e.level_color)||Xe(We,Be),this._background_color=e.background_color&&Ge(e.background_color)||Xe(Ie,De),this._full_value=null!==(i=e.full_value)&&void 0!==i?i:100,this._severity=e.severity?[...e.severity].sort((e,t)=>t.value-e.value):[],this._random_start=e.random_start||!1,this._top_margin=null!==(o=e.top_margin)&&void 0!==o?o:0})}requestUpdate(e,t){"_card"===e&&this.config.card&&super.requestUpdate(e,t),"hass"===e&&this.config.entity&&super.requestUpdate(e,t),"hass"===e&&this.config.fill_entity&&super.requestUpdate(e,t),"size"===e&&super.requestUpdate(e,t),"_level_entity"===e&&super.requestUpdate(e,t),"_fill_entity"===e&&super.requestUpdate(e,t),"_level_color"===e&&super.requestUpdate(e,t),"_background_color"===e&&super.requestUpdate(e,t),"_full_value"===e&&super.requestUpdate(e,t),"_severity"===e&&super.requestUpdate(e,t),"_random_start"===e&&super.requestUpdate(e,t),"config"===e&&super.requestUpdate(e,t)}_createCardElement(e,t){const i=e(t);return this.hass&&(i.hass=this.hass),i.addEventListener("ll-rebuild",i=>{i.stopPropagation(),this._rebuildCard(e,t)},{once:!0}),i}_rebuildCard(e,t){this._card=this._createCardElement(e,t),this.lastChild&&this.replaceChild(this._card,this.lastChild)}shouldUpdate(e){return!!this.config&&(void 0===e.get("hass")||(!!this.hasFillEntityChanged(e)||(!!this.hsDarkModeChchanged()||(!!this.hasCardEntityChanged(e)||(!!this.hasCardEntitiesChanged(e)||function(e,t,i){if(t.has("config")||i)return!0;if(e.config.entity){var o=t.get("hass");return!o||o.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1}(this,e,!1))))))}hsDarkModeChchanged(){const{themes:e}=this.hass,{darkMode:t}=e;return this._darkModeLastValue!==t&&(this._darkModeLastValue=t,this.backgroundColor=Xe(Ie,De),!0)}hasFillEntityChanged(e){var t;const i=e.get("hass");return!(!(null===(t=this.config)||void 0===t?void 0:t.fill_entity)||!(null==i?void 0:i.states[this.config.fill_entity])||i.states[this.config.fill_entity].state===this.hass.states[this.config.fill_entity].state)}hasCardEntitiesChanged(e){const t=e.get("hass"),i=this._card&&this._card._config.entities;if(i&&t&&e.has("hass")){const e=this.hass;for(const o of i)if(t.states[o]!==e.states[o])return!0}return!1}hasCardEntityChanged(e){const t=e.get("hass"),i=this._card&&this._card._config.entity;if(i&&(null==t?void 0:t.states[i])&&e.has("hass")){const e=this.hass;if(t.states[i]!==e.states[i])return!0}return!1}updated(e){super.updated(e),this._card&&(e.has("hass")||e.has("editMode"))&&(this.hass&&(this._card.hass=this.hass),this.backgroundColor=Xe(Ie,De))}render(){return this.hass&&this.config?this.config.show_warning?this._showWarning(Re("common.show_warning")):this.config.show_error?this._showError(Re("common.show_error")):R`
      <div id="container">
        ${this.makeFluidBackground()}
        ${this.makeEntityCard()}
      </div>
      <style>
        ha-card, ha-card > * {
          --ha-card-background: transparent;
          --card-background-color: transparent;
          --primary-background-color: transparent;
          --ha-card-box-shadow: none;
        }
      </style>
    `:R``}firstUpdated(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#container");t&&this.resizeObserver.observe(t)}updateSize(e){this.size={width:e.width,height:e.height}}_handleAction(e){this.hass&&this.config&&e.detail.action&&this._hasActionSet(e.detail.action)&&function(e,t,i,o){var r;"double_tap"===o&&i.double_tap_action?r=i.double_tap_action:"hold"===o&&i.hold_action?r=i.hold_action:"tap"===o&&i.tap_action&&(r=i.tap_action),me(e,t,i,r)}(this,this.hass,this.config,e.detail.action)}_hasActionSet(e){if(this.config&&e){const t=this.config[e+"_action"];return void 0!==t&&"none"!==t}return!1}_showWarning(e){return R` <hui-warning>${e}</hui-warning> `}_showError(e){const t=document.createElement("hui-error-card");return t.setConfig({type:"error",error:e,origConfig:this.config}),R` ${t} `}getSafeLevelValue(e){var t;if(!e)return 0;const i=(null===(t=this.hass.states[e])||void 0===t?void 0:t.state)||0;let o=0;return"number"==typeof i&&(o=i),"string"==typeof i&&(o=isNaN(parseFloat(i))?0:parseFloat(i)),o>=0?o/this._full_value*100:0}makeFluidBackground(){var e;const t=this.getSafeLevelValue(this._level_entity),i=this._severity.length>0?null===(e=this._severity.find(e=>e.value<=t))||void 0===e?void 0:e.color:void 0,o=i?Ge(i):this._level_color,r=!(!this._fill_entity||!this.hass.states[this._fill_entity])&&"on"===this.hass.states[this._fill_entity].state;return R` <fluid-background
      .size=${this.size}
      .value=${t}
      .backgroundColor=${this._background_color||this.backgroundColor}
      .levelColor=${o||Be}
      .filling=${r}
      .randomStart=${this._random_start}
      .topMargin=${this._top_margin}
    ></fluid-background>`}makeEntityCard(){if(!this._card)return R``;if(this.config.allow_click_through){const e=`FluidProgressBar: ${this._level_entity||"No Entity Defined"}`;return R` <ha-card tabindex="0" .label=${e}> ${this._card} </ha-card> `}return R` <ha-card
      @action=${this._handleAction}
      .actionHandler=${st({hasHold:be(this.config.hold_action),hasDoubleClick:be(this.config.double_tap_action)})}
      tabindex="0"
      .label=${`FluidProgressBar: ${this._level_entity||"No Entity Defined"}`}
      >${this._card}</ha-card
    >`}static get styles(){return a`
      #container {
        position: relative;
        border-radius: var(--ha-card-border-radius, 12px);
        border-style: solid;
        border-width: var(--ha-card-border-width, 1px);
        border-color: transparent;
        overflow: hidden;
      }

      .edit-mode #container {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }

      ha-card {
        border: none;
      }
    `}};e([he({attribute:!1})],nt.prototype,"hass",void 0),e([he({attribute:!1})],nt.prototype,"size",void 0),e([he({attribute:!1})],nt.prototype,"backgroundColor",void 0),e([ue()],nt.prototype,"_card",void 0),e([ue()],nt.prototype,"_level_entity",void 0),e([ue()],nt.prototype,"_fill_entity",void 0),e([ue()],nt.prototype,"_background_color",void 0),e([ue()],nt.prototype,"_level_color",void 0),e([ue()],nt.prototype,"_full_value",void 0),e([ue()],nt.prototype,"_severity",void 0),e([ue()],nt.prototype,"_random_start",void 0),e([ue()],nt.prototype,"_top_margin",void 0),e([ue()],nt.prototype,"config",void 0),nt=e([le("fluid-level-background-card")],nt);export{nt as FluidLevelBackgroundCard};
